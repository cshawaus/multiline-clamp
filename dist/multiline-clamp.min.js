/*!
 * multiline-clamp v1.2.0
 * Â© 2018 by Chris Shaw
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["multiline-clamp"]=t():e["multiline-clamp"]=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storeClampElement=null;var a=(0,r.mergeDefaultOptionsWithCustomOverrides)(o);this.options=a,this.targets=t instanceof window.NodeList?i(t):[t],this.targets.forEach(function(e){e.originalContent||(e.originalContent=n.getTargetContents(e)),a.tagsExpression instanceof window.RegExp&&(e.tags=e.originalContent.match(a.tagsExpression)||[]),n.clamp(e)}),(0,r.registerInstanceWithResizeHandler)(this)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getTargetContents",value:function(e){var t=e.innerHTML,n=this.options.trimWhitespace;return n&&(t=n instanceof window.RegExp?t.replace(n,""):t.trim()),t}},{key:"clamp",value:function(e){var t=this.characterLength,n=e.originalContent;if(!(n.length<=t)){n=n.substring(0,t).trim();var r,i=this.findTagsInContent(e);i.length&&(n=this.clampFromKnownTags(i,n));for(var o=!1,a=(n=n.replace(/\s+$/g,"")).length;--a>=0&&!o;)(">"===(r=n[a])||/(\w|\d)/i.test(r))&&(n=n.substring(0,a+1),o=!0);e.innerHTML=n,e.appendChild(this.clampElement)}}},{key:"refreshClamp",value:function(){var e=this;this.targets.forEach(function(t){return e.clamp(t)})}},{key:"findTagsInContent",value:function(e){var t=[],n=e.originalContent,r=e.tags,i=n,o=0;return Object.keys(r).forEach(function(e){e=r[e];var a=i.indexOf(e);-1!==a&&(o=n.length-i.length,i=i.substr(a+e.length),t.push({closing:-1!==e.indexOf("</"),element:e,offset:o+a}))}),t}},{key:"clampFromKnownTags",value:function(e,t){var n=this.options.partialTags,r=t;return e.forEach(function(i,o){var a=i.element.length;if(a!==t.substr(i.offset,a).length){var s=e[o-1];switch(n){case"pull":r=r.substring(0,s.offset);break;case"pull-and-retain":if(i.closing){var l=(r=r.substring(0,i.offset)).substr(s.offset+s.element.length);r=r.substring(0,s.offset)+l}break;case"complete":default:i.closing&&(r=r.substring(0,i.offset)+i.element)}}}),r}},{key:"characterLength",get:function(){var e,t=this.options,n=t.clampSize,r=t.responsive,i=window.innerWidth;return r instanceof window.Object&&Object.keys(r).forEach(function(t){i<=t&&!e&&(e=r[t])}),e||n}},{key:"clampElement",get:function(){if(this.storedClampElement)return this.storedClampElement.cloneNode(!0);var e=this.options.clamp,t=e;return t instanceof window.HTMLElement||(t=document.createElement("span")).appendChild(document.createTextNode(e)),this.storedClampElement=t,t}}]),e}(),s=a;t.default=s,window.MultilineClamp=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstanceWithResizeHandler=function(e){var t=!1;a.forEach(function(n){n.target===e.target&&(t=!0)}),t||a.push(e);o||(window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(function(){a.forEach(function(e){return e.refreshClamp()})},100)}),o=!0)},t.mergeDefaultOptionsWithCustomOverrides=function(e){var t=JSON.parse(JSON.stringify(r.default));t.tagsExpression=r.default.tagsExpression,("string"==typeof e.clamp||e.clamp instanceof window.HTMLElement)&&(t.clamp=e.clamp);e.clampSize&&!Number.isNaN(e.clampSize)&&(t.clampSize=e.clampSize);"string"==typeof e.partialTags&&/^complete|pull|pull-and-retain$/.test(e.partialTags)&&(t.partialTags=e.partialTags);if(!1!==e.responsive&&e.responsive instanceof window.Object){var n={},i=e.responsive;Object.keys(i).forEach(function(e){var t=i[e];Number.isNaN(t)?console.warn("The breakpoint for '".concat(e,"' contains an invalid value:"),t):n[e]=t}),t.responsive=Object.keys(n).length&&n||!1}e.tagsExpression instanceof window.RegExp&&(t.tagsExpression=e.tagsExpression);e.trimWhitespace&&(e.trimWhitespace instanceof window.Boolean||e.trimWhitespace instanceof window.RegExp)&&(t.trimWhitespace=e.trimWhitespace);return t};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var i,o=!1,a=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={clamp:"...",clampSize:72,partialTags:"complete",responsive:!1,tagsExpression:/<(.|\n)*?>/g,trimWhitespace:!0};t.default=r}])});
//# sourceMappingURL=multiline-clamp.min.map